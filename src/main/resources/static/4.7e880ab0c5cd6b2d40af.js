(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{tHuW:function(e,t,n){"use strict";n.r(t),n.d(t,"SearchPageModule",(function(){return X}));var c=n("ofXK"),r=n("3Pt+"),i=n("1kSV"),s=n("fXoL");let a=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},imports:[[c.b]]}),e})();var o=n("HDdC"),h=n("jhN1");let u=(()=>{class e{constructor(e,t){this.document=e,this.eventManager=t,this.defaults={element:this.document}}addShortcut(e){const t=Object.assign(Object.assign({},this.defaults),e),n="keydown."+t.keys;return new o.a(e=>{const c=this.eventManager.addEventListener(t.element,n,t=>{t.preventDefault(),e.next(t)});return()=>{c()}})}}return e.\u0275fac=function(t){return new(t||e)(s.Xb(c.c),s.Xb(h.b))},e.\u0275prov=s.Gb({token:e,factory:e.\u0275fac}),e})();var l=function(e){return e.GENERAL="GENERAL",e.TORRENT="TORRENT",e.VIDEO="VIDEO",e.CODE="CODE",e.NEWS="NEWS",e.MAP="MAP",e}({}),b=n("2Vo4"),p=n("AytR"),g=function(e){return e.FOUND_SEARCH_RESULT="FOUND_SEARCH_RESULT",e.NO_SEARCH_RESULT="NO_SEARCH_RESULT",e.ENGINE_BREAK_DOWN="ENGINE_BREAK_DOWN",e.ENGINE_TIME_OUT="ENGINE_TIME_OUT",e}({}),d=function(e){return e.SEARCH_IN_PROGRESS="SEARCH_IN_PROGRESS",e.SEARCH_RESULT_EMPTY="SEARCH_RESULT_EMPTY",e.SEARCH_RESULT_FOUND="SEARCH_RESULT_FOUND",e.SEARCH_REQUEST_EMPTY="SEARCH_REQUEST_EMPTY",e.SEARCH_ERROR="SEARCH_ERROR",e}({});function f(e){return!e||!e.trim()}function y(e,t){return e?e instanceof String?f(""+e)?t:e:e instanceof Array?0===e.length?t:e:e instanceof Object&&0===Object.keys(e).length?t:e:t}var v=n("tk/3");let E=(()=>{class e{constructor(e){this.httpClient=e,this.apiEndpoint=p.a.baseUrl,this.previousSearchQuery="",this.resultSubject=new b.a({}),this.statusSubject=new b.a(d.SEARCH_RESULT_EMPTY)}search(e){if(f(e.query))return void this.statusSubject.next(d.SEARCH_REQUEST_EMPTY);if(this.previousSearchQuery===e.query)return void this.statusSubject.next(d.SEARCH_RESULT_FOUND);const t={query:e.query};var n;this.statusSubject.next(d.SEARCH_IN_PROGRESS),(n=this.searchRequestSubscription)&&n.unsubscribe(),this.searchRequestSubscription=this.httpClient.get(this.apiEndpoint+"/api/v1/search/general",{params:t}).subscribe(t=>this.publishResponse(t,e),()=>this.statusSubject.next(d.SEARCH_ERROR))}publishResponse(e,t){const n=this.convertEntityToViewModel(e),{searchResults:c=[]}=n,r=c.length>0?d.SEARCH_RESULT_FOUND:d.SEARCH_RESULT_EMPTY;this.previousSearchQuery=t.query,this.statusSubject.next(r),this.resultSubject.next(Object.assign(Object.assign({},n),{query:t.query}))}convertEntityToViewModel(e={}){const{duration:t=0,searchResults:n=[]}=e;let c={};return{duration:t,engineStatus:n.map(e=>{const{duration:t,engineName:n}=e,{searchResults:r=[],engineResultType:i}=e;let s=0;return i===g.FOUND_SEARCH_RESULT&&(s=r.length,r.forEach(e=>((e,t)=>{const{content:n,url:r,title:i}=e,s=y(c[r],{}),{title:a="",content:o=""}=s,{engines:h=[],rank:u=0}=s;c[r]={url:r,title:i.length>a.length?i:a,content:n.length>o.length?n:o,engines:[...h,t],rank:u+1}})(e,n))),{duration:t,engineName:n,engineResultType:i,resultCount:s}}),searchResults:Object.values(c).sort(({rank:e},{rank:t})=>t-e)}}}return e.\u0275fac=function(t){return new(t||e)(s.Xb(v.a))},e.\u0275prov=s.Gb({token:e,factory:e.\u0275fac}),e})(),S=(()=>{class e{constructor(e){this.searchEngineGeneralService=e}search(e){const t=Object.assign(Object.assign({},e),{query:e.query.trim()});switch(e.searchType.type){case l.GENERAL:this.searchEngineGeneralService.search(t)}}}return e.\u0275fac=function(t){return new(t||e)(s.Xb(E))},e.\u0275prov=s.Gb({token:e,factory:e.\u0275fac}),e})();const T=[{index:1,type:l.GENERAL},{index:2,type:l.CODE},{index:3,type:l.TORRENT},{index:4,type:l.VIDEO},{index:5,type:l.NEWS},{index:6,type:l.MAP}],x=l.GENERAL;let O=(()=>{class e{constructor(){const e=T.find(e=>e.type===x);this.defaultSearchType=y(e,T[0])}getSearchTypes(){return T}getSearchTypesByIndex(e){return T.find(t=>t.index===e)}getDefaultSearchTypes(){return this.defaultSearchType}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Gb({token:e,factory:e.\u0275fac}),e})();var m=n("tyNb");let C=(()=>{class e{constructor(){this.logo="Eniac"}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Eb({type:e,selectors:[["app-logo"]],decls:10,vars:1,consts:[[1,"d-flex","justify-content-center","pt-4"],[1,"blockquote","pb-0"],[1,"mb-0"],[1,"d-none","d-sm-inline"],[1,"blockquote-footer","float-right","d-none","d-sm-inline"],["title","Source Title",1,"px-2"]],template:function(e,t){1&e&&(s.Pb(0,"div",0),s.Pb(1,"blockquote",1),s.Pb(2,"h1",2),s.Ac(3),s.Pb(4,"small",3),s.Ac(5,"Meta Search Engine"),s.Ob(),s.Ob(),s.Pb(6,"footer",4),s.Ac(7," Version "),s.Pb(8,"cite",5),s.Ac(9,"0.0.1"),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&e&&(s.xb(3),s.Cc(" ",t.logo," "))},styles:[""]}),e})();const R=["searchField"];let P=(()=>{class e{constructor(){this.onSearchClick=new s.n,this.searchQuery="",this.searchQueryChange=new s.n}ngOnInit(){}ngAfterViewInit(){this.searchField.nativeElement.focus()}onEnterPress(){this.onSearchClick.emit(this.searchQuery)}onTextChange(){this.searchQueryChange.emit(this.searchQuery)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Eb({type:e,selectors:[["app-search-field"]],viewQuery:function(e,t){var n;1&e&&s.Ec(R,!0),2&e&&s.qc(n=s.bc())&&(t.searchField=n.first)},inputs:{searchQuery:"searchQuery"},outputs:{onSearchClick:"onSearchClick",searchQueryChange:"searchQueryChange"},decls:10,vars:1,consts:[[1,"search-field","d-flex","container","pt-4"],[1,"flex-grow-1","position-relative"],["type","text","placeholder","Search","aria-label","Search",1,"form-control","pr-5",3,"ngModel","ngModelChange","keyup.enter"],["searchField",""],["type","button",1,"search-button","btn","position-absolute","text-muted",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","1.2em","height","1.2em","fill","currentColor","viewBox","0 0 16 16",1,"button-icon","bi","bi-search"],["d","M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"],["type","button",1,"btn","ml-1","text-muted","position-inline"],["xmlns","http://www.w3.org/2000/svg","width","1.2em","height","1.2em","fill","currentColor","viewBox","0 0 16 16",1,"button-icon","bi","bi-gear-fill"],["d","M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"]],template:function(e,t){1&e&&(s.Pb(0,"div",0),s.Pb(1,"div",1),s.Pb(2,"input",2,3),s.ac("ngModelChange",(function(e){return t.searchQuery=e}))("ngModelChange",(function(){return t.onTextChange()}))("keyup.enter",(function(){return t.onEnterPress()})),s.Ob(),s.Pb(4,"button",4),s.ac("click",(function(){return t.onEnterPress()})),s.dc(),s.Pb(5,"svg",5),s.Lb(6,"path",6),s.Ob(),s.Ob(),s.Ob(),s.cc(),s.Pb(7,"button",7),s.dc(),s.Pb(8,"svg",8),s.Lb(9,"path",9),s.Ob(),s.Ob(),s.Ob()),2&e&&(s.xb(2),s.kc("ngModel",t.searchQuery))},directives:[r.a,r.e,r.f],styles:["div.search-field[_ngcontent-%COMP%]{max-width:720px}button.search-button[_ngcontent-%COMP%]{right:0;top:0}svg.button-icon[_ngcontent-%COMP%]{position:relative;top:-2px}"]}),e})();function I(e,t){if(1&e&&(s.Pb(0,"li",3),s.Pb(1,"a",4),s.Ac(2),s.fc(3,"titlecase"),s.Ob(),s.Ob()),2&e){const e=t.$implicit;s.kc("ngbNavItem",e.index),s.xb(2),s.Cc("",s.gc(3,2,e.type)," ")}}let w=(()=>{class e{constructor(e){this.searchTypeProviderService=e,this.alignment="left",this.variant="tabs",this.activeTabIndex=0,this.activeTabIndexChange=new s.n}ngOnInit(){this.searchTypes=this.searchTypeProviderService.getSearchTypes()||[]}onActiveTabIndexChange(e){this.activeTabIndex=e,this.activeTabIndexChange.emit(this.activeTabIndex)}}return e.\u0275fac=function(t){return new(t||e)(s.Kb(O))},e.\u0275cmp=s.Eb({type:e,selectors:[["app-search-types-tab"]],inputs:{alignment:"alignment",variant:"variant",activeTabIndex:"activeTabIndex"},outputs:{activeTabIndexChange:"activeTabIndexChange"},decls:3,vars:6,consts:[["ngbNav","",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngFor","ngForOf"],[3,"ngbNavItem"],["ngbNavLink",""]],template:function(e,t){1&e&&(s.Pb(0,"ul",0,1),s.ac("activeIdChange",(function(e){return t.onActiveTabIndexChange(e)})),s.yc(2,I,4,4,"li",2),s.Ob()),2&e&&(s.Ab("justify-content-",t.alignment," nav-",t.variant," small-nav pt-4 px-2"),s.kc("activeId",t.activeTabIndex),s.xb(2),s.kc("ngForOf",t.searchTypes))},directives:[i.b,c.i,i.c,i.d],pipes:[c.q],styles:[""]}),e})();var A=n("XNiG"),k=n("1G5W");function N(e,t){1&e&&(s.Nb(0),s.Pb(1,"h3",2),s.Ac(2,"GENERAL"),s.Ob(),s.Mb())}function _(e,t){1&e&&(s.Nb(0),s.Pb(1,"h3",2),s.Ac(2,"CODE"),s.Ob(),s.Mb())}function M(e,t){1&e&&(s.Nb(0),s.Pb(1,"h3",2),s.Ac(2,"TORRENT"),s.Ob(),s.Mb())}function Q(e,t){1&e&&(s.Nb(0),s.Pb(1,"h3",2),s.Ac(2,"VIDEO"),s.Ob(),s.Mb())}function L(e,t){1&e&&(s.Nb(0),s.Pb(1,"h3",2),s.Ac(2,"NEWS"),s.Ob(),s.Mb())}function j(e,t){1&e&&(s.Nb(0),s.Pb(1,"h3",2),s.Ac(2,"MAP"),s.Ob(),s.Mb())}function D(e,t){if(1&e&&(s.yc(0,N,3,0,"ng-container",1),s.yc(1,_,3,0,"ng-container",1),s.yc(2,M,3,0,"ng-container",1),s.yc(3,Q,3,0,"ng-container",1),s.yc(4,L,3,0,"ng-container",1),s.yc(5,j,3,0,"ng-container",1)),2&e){const e=s.ec();s.kc("ngSwitchCase",e.SearchTypeEnum.GENERAL),s.xb(1),s.kc("ngSwitchCase",e.SearchTypeEnum.CODE),s.xb(1),s.kc("ngSwitchCase",e.SearchTypeEnum.TORRENT),s.xb(1),s.kc("ngSwitchCase",e.SearchTypeEnum.VIDEO),s.xb(1),s.kc("ngSwitchCase",e.SearchTypeEnum.NEWS),s.xb(1),s.kc("ngSwitchCase",e.SearchTypeEnum.MAP)}}let H=(()=>{class e{constructor(e,t,n){this.searchTypeProviderService=e,this.searchEngineGeneralService=t,this.searchEngineCoreService=n,this.searchQuery="",this.searchTypeIndex=1,this.isAlive=new A.a,this.searchTypeModel=this.searchTypeProviderService.getDefaultSearchTypes()}ngOnInit(){this.searchEngineGeneralService.resultSubject.pipe(Object(k.a)(this.isAlive)).subscribe(e=>console.log(e)),this.searchEngineGeneralService.statusSubject.pipe(Object(k.a)(this.isAlive)).subscribe(e=>console.log(e))}ngOnDestroy(){this.isAlive.next(),this.isAlive.complete()}ngOnChanges({searchTypeIndex:e}){if(e){const{currentValue:t}=e;this.searchTypeModel=this.searchTypeProviderService.getSearchTypesByIndex(t)}this.performSearch()}performSearch(){this.searchEngineCoreService.search({query:this.searchQuery,searchType:this.searchTypeModel})}}return e.\u0275fac=function(t){return new(t||e)(s.Kb(O),s.Kb(E),s.Kb(S))},e.\u0275cmp=s.Eb({type:e,selectors:[["app-search-result"]],inputs:{searchQuery:"searchQuery",searchTypeIndex:"searchTypeIndex"},features:[s.vb],decls:2,vars:1,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"text-center","py-5"]],template:function(e,t){1&e&&(s.Pb(0,"div"),s.yc(1,D,6,6,"ng-template",0),s.Ob()),2&e&&(s.xb(1),s.kc("ngSwitch",t.searchTypeModel.type))},directives:[c.k,c.l],styles:[""]}),e})(),U=(()=>{class e{transform(e,t,n){let c=new RegExp(t,"g");return e.replace(c,n)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Jb({name:"stringReplace",type:e,pure:!0}),e})();function G(e,t){if(1&e&&(s.dc(),s.Ac(0),s.fc(1,"stringReplace")),2&e){const e=s.ec();s.Cc("Search ( ",s.hc(1,1,e.shortcut,"\\."," + ")," )")}}let q=(()=>{class e{constructor(e){this.hotKeysProviderService=e,this.onTrigger=new s.n,this.shortcut="shift.space"}ngOnInit(){this.hotkeyObserver=this.hotKeysProviderService.addShortcut({keys:this.shortcut}).subscribe(()=>this.onClick())}ngOnDestroy(){this.hotkeyObserver.unsubscribe()}onClick(){this.onTrigger.emit()}}return e.\u0275fac=function(t){return new(t||e)(s.Kb(u))},e.\u0275cmp=s.Eb({type:e,selectors:[["app-search-floating-button"]],outputs:{onTrigger:"onTrigger"},decls:5,vars:2,consts:[["type","button","placement","left","tooltipClass","tooltip-left-muted",1,"search-floating-button","btn","btn-primary","rounded-circle","position-fixed",3,"ngbTooltip","openDelay","click"],["xmlns","http://www.w3.org/2000/svg","width","1.4em","height","1.4em","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-search","button-icon"],["d","M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"],["buttonTooltip",""]],template:function(e,t){if(1&e&&(s.Pb(0,"button",0),s.ac("click",(function(){return t.onClick()})),s.dc(),s.Pb(1,"svg",1),s.Lb(2,"path",2),s.Ob(),s.Ob(),s.yc(3,G,2,5,"ng-template",null,3,s.zc)),2&e){const e=s.rc(4);s.kc("ngbTooltip",e)("openDelay",400)}},directives:[i.e],pipes:[U],styles:["button.search-floating-button[_ngcontent-%COMP%]{width:56px;height:56px;bottom:72px;right:34px}svg.button-icon[_ngcontent-%COMP%]{position:relative;top:-2px}"]}),e})();function F(e,t){1&e&&s.Lb(0,"div")}function V(e,t){if(1&e){const e=s.Qb();s.Pb(0,"div",6),s.Lb(1,"app-logo"),s.Pb(2,"app-search-field",7),s.ac("searchQueryChange",(function(t){return s.sc(e),s.ec().searchQuery=t}))("onSearchClick",(function(){return s.sc(e),s.ec().performSearch()})),s.Ob(),s.Pb(3,"app-search-types-tab",8),s.ac("activeTabIndexChange",(function(t){return s.sc(e),s.ec().activeTabIndex=t}))("activeTabIndexChange",(function(){return s.sc(e),s.ec().onActiveTabIndexChange()})),s.Ob(),s.Ob()}if(2&e){const e=s.ec();s.xb(2),s.kc("searchQuery",e.searchQuery),s.xb(1),s.kc("activeTabIndex",e.activeTabIndex)}}function K(e,t){if(1&e){const e=s.Qb();s.Pb(0,"div",9),s.Pb(1,"app-search-types-tab",10),s.ac("activeTabIndexChange",(function(t){return s.sc(e),s.ec().activeTabIndex=t}))("activeTabIndexChange",(function(){return s.sc(e),s.ec().onActiveTabIndexChange()})),s.Ob(),s.Ob(),s.Pb(2,"div",11),s.Pb(3,"div",12),s.Pb(4,"div",13),s.Lb(5,"app-search-result",14),s.Ob(),s.Pb(6,"div",15),s.Pb(7,"div",16),s.Lb(8,"app-logo"),s.Ob(),s.Ob(),s.Ob(),s.Ob()}if(2&e){const e=s.ec();s.xb(1),s.kc("activeTabIndex",e.activeTabIndex),s.xb(4),s.kc("searchQuery",e.searchQuery)("searchTypeIndex",e.activeTabIndex)}}function z(e,t){1&e&&s.Lb(0,"div")}function W(e,t){if(1&e){const e=s.Qb();s.Pb(0,"app-search-floating-button",17),s.ac("onTrigger",(function(){return s.sc(e),s.ec().showSearchPanel()})),s.Ob()}}const B=[{path:"",component:(()=>{class e{constructor(e){this.searchTypeProviderService=e,this.searchQuery="",this.showPageSearch=!0;const t=this.searchTypeProviderService.getDefaultSearchTypes();t&&(this.activeTabIndex=t.index)}ngOnInit(){}onActiveTabIndexChange(){this.performSearch()}performSearch(){this.searchQuery&&this.searchQuery.trim().length>0&&this.showResultPanel()}showSearchPanel(){this.showPageSearch=!0}showResultPanel(){this.showPageSearch=!1}}return e.\u0275fac=function(t){return new(t||e)(s.Kb(O))},e.\u0275cmp=s.Eb({type:e,selectors:[["app-search-page"]],decls:9,vars:5,consts:[[1,"h-100"],[4,"ngIf","ngIfThen","ngIfElse"],["searchPanel",""],["resultPanel",""],[4,"ngIf","ngIfThen"],["searchFloatingButton",""],[1,"position-relative","search-panel"],[3,"searchQuery","searchQueryChange","onSearchClick"],["variant","pills","alignment","center",3,"activeTabIndex","activeTabIndexChange"],[1,"fixed-top","container-fluid","bg-white","w-100"],["alignment","justify",3,"activeTabIndex","activeTabIndexChange"],[1,"result-area","container-fluid"],[1,"row"],[1,"col-sm-12","col-md-7"],[3,"searchQuery","searchTypeIndex"],[1,"col-sm-12","col-md-5"],[1,"bg-light","h-100"],[3,"onTrigger"]],template:function(e,t){if(1&e&&(s.Pb(0,"div",0),s.yc(1,F,1,0,"div",1),s.yc(2,V,4,2,"ng-template",null,2,s.zc),s.yc(4,K,9,3,"ng-template",null,3,s.zc),s.yc(6,z,1,0,"div",4),s.yc(7,W,1,0,"ng-template",null,5,s.zc),s.Ob()),2&e){const e=s.rc(3),n=s.rc(5),c=s.rc(8);s.xb(1),s.kc("ngIf",t.showPageSearch)("ngIfThen",e)("ngIfElse",n),s.xb(5),s.kc("ngIf",!t.showPageSearch)("ngIfThen",c)}},directives:[c.j,C,P,w,H,q],styles:["div.search-panel[_ngcontent-%COMP%]{top:40%;transform:translateY(-50%)}div.result-area[_ngcontent-%COMP%]{padding-top:56px;padding-bottom:56px}"]}),e})()}];let Y=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},imports:[[m.a.forChild(B)],m.a]}),e})(),X=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},providers:[S,E,O,u],imports:[[Y,a,c.b,r.b,i.a]]}),e})()}}]);